/**
 * 404Museum v1.0.0 - Transform Error Pages into Interactive Art Galleries
 * (c) JodyLabs - MIT License
 */
!function(){"use strict";const e={theme:"dark",artTypes:["generative","fractals","particles","abstract"],showBranding:!0,customMessage:"Page not found, but look at this beautiful art instead!",colors:{primary:"#4ecdc4",secondary:"#ff6b6b",background:"#0a0a0a",text:"#ffffff"},apiEndpoint:null,autoDetect:!0,showNavigation:!0,artDuration:3e4,particleCount:100,animationSpeed:1},t=Object.assign({},e,window.Museum404Config||{});class i{constructor(){this.isActive=!1,this.currentArtType=null,this.animationId=null,this.artSwitchInterval=null,this.canvas=null,this.ctx=null,this.particles=[],this.init()}init(){t.autoDetect&&this.is404Page()&&this.activate(),window.Museum404={activate:()=>this.activate(),deactivate:()=>this.deactivate(),switchArt:e=>this.switchArt(e),isActive:()=>this.isActive}}is404Page(){return[document.title.toLowerCase().includes("404"),document.title.toLowerCase().includes("not found"),document.title.toLowerCase().includes("page not found"),document.body.innerText.toLowerCase().includes("404"),document.body.innerText.toLowerCase().includes("page not found"),window.location.pathname.includes("404")].some(e=>e)}activate(){this.isActive||(this.isActive=!0,this.logVisit(),this.createArtGallery(),this.startArtRotation())}deactivate(){this.isActive&&(this.isActive=!1,this.stopAnimations(),this.removeArtGallery())}createArtGallery(){this.originalBody=document.body.innerHTML;const e=`\n                <div id="museum404-gallery" style="\n                    position: fixed;\n                    top: 0;\n                    left: 0;\n                    width: 100vw;\n                    height: 100vh;\n                    background: ${t.colors.background};\n                    color: ${t.colors.text};\n                    z-index: 999999;\n                    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n                    overflow: hidden;\n                ">\n                    <div id="museum404-header" style="\n                        position: absolute;\n                        top: 20px;\n                        left: 50%;\n                        transform: translateX(-50%);\n                        text-align: center;\n                        z-index: 1000000;\n                    ">\n                        <h1 style="\n                            margin: 0 0 10px;\n                            font-size: 2.5rem;\n                            font-weight: 900;\n                            background: linear-gradient(45deg, ${t.colors.primary}, ${t.colors.secondary});\n                            -webkit-background-clip: text;\n                            -webkit-text-fill-color: transparent;\n                            background-clip: text;\n                        ">404MUSEUM</h1>\n                        <p style="\n                            margin: 0;\n                            font-size: 1rem;\n                            opacity: 0.8;\n                        ">${t.customMessage}</p>\n                    </div>\n                    \n                    ${t.showNavigation?this.createNavigationHTML():""}\n                    \n                    <canvas id="museum404-canvas" style="\n                        position: absolute;\n                        top: 0;\n                        left: 0;\n                        width: 100%;\n                        height: 100%;\n                        z-index: 999999;\n                    "></canvas>\n                    \n                    ${t.showBranding?this.createBrandingHTML():""}\n                    \n                    <div id="museum404-exit" style="\n                        position: absolute;\n                        top: 20px;\n                        right: 20px;\n                        background: rgba(255, 255, 255, 0.1);\n                        border: 1px solid rgba(255, 255, 255, 0.2);\n                        color: white;\n                        padding: 10px 15px;\n                        border-radius: 20px;\n                        cursor: pointer;\n                        font-size: 0.9rem;\n                        backdrop-filter: blur(10px);\n                        transition: all 0.3s ease;\n                        z-index: 1000000;\n                    " onclick="window.Museum404.deactivate()">\n                        âœ– Exit Gallery\n                    </div>\n                </div>\n            `;document.body.innerHTML=e,this.canvas=document.getElementById("museum404-canvas"),this.ctx=this.canvas.getContext("2d"),this.resizeCanvas(),window.addEventListener("resize",()=>this.resizeCanvas()),this.switchArt(this.getRandomArtType())}createNavigationHTML(){return`\n                <div id="museum404-nav" style="\n                    position: absolute;\n                    bottom: 30px;\n                    left: 50%;\n                    transform: translateX(-50%);\n                    display: flex;\n                    gap: 15px;\n                    z-index: 1000000;\n                ">\n                    <button onclick="window.Museum404.switchArt('generative')" style="\n                        background: rgba(255, 255, 255, 0.1);\n                        border: 1px solid rgba(255, 255, 255, 0.2);\n                        color: white;\n                        padding: 8px 15px;\n                        border-radius: 20px;\n                        cursor: pointer;\n                        font-size: 0.8rem;\n                        backdrop-filter: blur(10px);\n                        transition: all 0.3s ease;\n                    ">Waves</button>\n                    <button onclick="window.Museum404.switchArt('particles')" style="\n                        background: rgba(255, 255, 255, 0.1);\n                        border: 1px solid rgba(255, 255, 255, 0.2);\n                        color: white;\n                        padding: 8px 15px;\n                        border-radius: 20px;\n                        cursor: pointer;\n                        font-size: 0.8rem;\n                        backdrop-filter: blur(10px);\n                        transition: all 0.3s ease;\n                    ">Particles</button>\n                    <button onclick="window.Museum404.switchArt('fractals')" style="\n                        background: rgba(255, 255, 255, 0.1);\n                        border: 1px solid rgba(255, 255, 255, 0.2);\n                        color: white;\n                        padding: 8px 15px;\n                        border-radius: 20px;\n                        cursor: pointer;\n                        font-size: 0.8rem;\n                        backdrop-filter: blur(10px);\n                        transition: all 0.3s ease;\n                    ">Fractals</button>\n                    <button onclick="window.Museum404.switchArt('abstract')" style="\n                        background: rgba(255, 255, 255, 0.1);\n                        border: 1px solid rgba(255, 255, 255, 0.2);\n                        color: white;\n                        padding: 8px 15px;\n                        border-radius: 20px;\n                        cursor: pointer;\n                        font-size: 0.8rem;\n                        backdrop-filter: blur(10px);\n                        transition: all 0.3s ease;\n                    ">Abstract</button>\n                </div>\n            `}createBrandingHTML(){return`\n                <div style="\n                    position: absolute;\n                    bottom: 20px;\n                    right: 20px;\n                    font-size: 0.7rem;\n                    opacity: 0.6;\n                    z-index: 1000000;\n                ">\n                    Powered by <a href="https://jodylabs.surge.sh/404museum/" target="_blank" style="color: ${t.colors.primary}; text-decoration: none;">404Museum</a>\n                </div>\n            `}removeArtGallery(){this.originalBody&&(document.body.innerHTML=this.originalBody)}resizeCanvas(){this.canvas&&(this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight)}getRandomArtType(){return t.artTypes[Math.floor(Math.random()*t.artTypes.length)]}switchArt(e){t.artTypes.includes(e)||(e=this.getRandomArtType()),this.currentArtType=e,this.stopAnimations();switch(e){case"generative":this.startGenerativeArt();break;case"particles":this.startParticleSystem();break;case"fractals":this.startFractalArt();break;case"abstract":this.startAbstractArt();break;default:this.startGenerativeArt()}}startArtRotation(){t.artDuration>0&&(this.artSwitchInterval=setInterval(()=>{this.switchArt(this.getRandomArtType())},t.artDuration))}stopAnimations(){this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.artSwitchInterval&&(clearInterval(this.artSwitchInterval),this.artSwitchInterval=null)}startGenerativeArt(){const e=()=>{if(!this.isActive||"generative"!==this.currentArtType)return;this.ctx.fillStyle="rgba(10, 10, 26, 0.05)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height);const i=.001*Date.now()*t.animationSpeed;for(let t=0;t<8;t++){this.ctx.beginPath(),this.ctx.strokeStyle=`hsl(${(30*i+45*t)%360}, 70%, 60%)`,this.ctx.lineWidth=2;for(let a=0;a<this.canvas.width;a+=5){const s=this.canvas.height/2+80*Math.sin(.005*a+i+.5*t)*Math.sin(.3*i+.2*t);0===a?this.ctx.moveTo(a,s):this.ctx.lineTo(a,s)}this.ctx.stroke()}this.animationId=requestAnimationFrame(e)};e()}startParticleSystem(){this.particles=[];for(let e=0;e<t.particleCount;e++)this.particles.push({x:Math.random()*this.canvas.width,y:Math.random()*this.canvas.height,vx:2*(Math.random()-.5)*t.animationSpeed,vy:2*(Math.random()-.5)*t.animationSpeed,size:3*Math.random()+1,hue:360*Math.random(),opacity:.5*Math.random()+.5});const e=()=>{this.isActive&&"particles"===this.currentArtType&&(this.ctx.fillStyle="rgba(10, 10, 26, 0.05)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.particles.forEach(e=>{e.x+=e.vx,e.y+=e.vy,(e.x<0||e.x>this.canvas.width)&&(e.vx*=-1),(e.y<0||e.y>this.canvas.height)&&(e.vy*=-1),this.ctx.beginPath(),this.ctx.arc(e.x,e.y,e.size,0,2*Math.PI),this.ctx.fillStyle=`hsla(${e.hue}, 70%, 60%, ${e.opacity})`,this.ctx.fill(),e.hue+=.5}),this.animationId=requestAnimationFrame(e))};e()}startFractalArt(){const e=(e,t,i,a,s)=>{if(0===a||i<1)return;const n=e+Math.cos(s)*i,r=t+Math.sin(s)*i;this.ctx.beginPath(),this.ctx.moveTo(e,t),this.ctx.lineTo(n,r),this.ctx.strokeStyle=`hsl(${30*a+.01*Date.now()}, 70%, 60%)`,this.ctx.lineWidth=.5*a,this.ctx.stroke(),e(n,r,.75*i,a-1,s-.6),e(n,r,.75*i,a-1,s+.6)},i=()=>{if(!this.isActive||"fractals"!==this.currentArtType)return;this.ctx.fillStyle="rgba(10, 10, 26, 0.02)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height);const a=.001*Date.now()*t.animationSpeed;e(this.canvas.width/2,this.canvas.height-50,80,10,-Math.PI/2+.3*Math.sin(a)),this.animationId=requestAnimationFrame(i)};i()}startAbstractArt(){const e=()=>{if(!this.isActive||"abstract"!==this.currentArtType)return;this.ctx.fillStyle="rgba(10, 10, 26, 0.05)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height);const i=.002*Date.now()*t.animationSpeed;for(let t=0;t<30;t++){const a=this.canvas.width/2+Math.cos(i+.3*t)*(50+8*t),s=this.canvas.height/2+Math.sin(i+.2*t)*(40+6*t),n=10+8*Math.sin(3*i+t);this.ctx.beginPath(),this.ctx.arc(a,s,n,0,2*Math.PI),this.ctx.fillStyle=`hsl(${(50*i+12*t)%360}, 80%, 60%)`,this.ctx.fill()}this.animationId=requestAnimationFrame(e)};e()}logVisit(){if(!t.apiEndpoint)return;const e={timestamp:(new Date).toISOString(),url:window.location.href,referrer:document.referrer||"direct",userAgent:navigator.userAgent,viewport:{width:window.innerWidth,height:window.innerHeight}};fetch(t.apiEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).catch(e=>{console.warn("404Museum: Analytics logging failed",e)})}}document.readyState?"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>new i):new i():new i}();
