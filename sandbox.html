<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GIF Creator 2.0 - Free Online Animated GIF Maker | JodyLabs</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Create custom animated GIFs with our free web-based GIF maker! Upload images, adjust timing, add effects, and generate high-quality GIFs for social media and presentations.">
    <meta name="keywords" content="GIF creator, animated GIF maker, online GIF tool, create GIFs, image animation, social media GIFs, free GIF maker, web tool">
    <meta name="author" content="JodyLabs">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="GIF Creator - Free Online Animated GIF Maker">
    <meta property="og:description" content="ðŸŽ¨ Create amazing animated GIFs in your browser! Upload images, adjust timing, add effects. Perfect for social media, memes, and presentations. Free to use!">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://jodylabs.surge.sh/sandbox.html">
    <meta property="og:site_name" content="JodyLabs">
    <meta property="og:image" content="https://jodylabs.surge.sh/Images/gif-creator-preview.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="GIF Creator Tool Interface">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@jodylabs">
    <meta name="twitter:title" content="GIF Creator - Free Online Animated GIF Maker">
    <meta name="twitter:description" content="ðŸŽ¨ Create animated GIFs in your browser! Upload images, adjust timing, add effects. Perfect for social media and memes. Free tool!">
    <meta name="twitter:image" content="https://jodylabs.surge.sh/Images/gif-creator-preview.png">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://jodylabs.surge.sh/sandbox.html">
    <!-- Use gif.js from MaskingPower directory -->
    <script src="MaskingPower/gif.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', 'Arial', 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, #1a0000 0%, #0a0000 100%);
            color: #ff3c3c;
            min-height: 100vh;
            margin: 0;
            letter-spacing: 0.04em;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
        }
        h1 {
            font-family: 'Segoe UI Black', 'Arial Black', 'Impact', sans-serif;
            font-size: 2.3em;
            color: #ff3c3c;
            letter-spacing: 0.18em;
            text-shadow:
                0 0 16px #ffb3b3,
                0 0 32px #ff3c3c,
                0 0 60px #220000,
                0 0 8px #fff;
            margin-top: 32px;
            margin-bottom: 24px;
            filter: brightness(1.2) drop-shadow(0 0 8px #ff3c3c88);
            text-align: center;
        }
        button {
            background: #2a0000;
            color: #ff3c3c;
            border: 1px solid #ff3c3c;
            border-radius: 4px;
            padding: 8px 18px;
            margin: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
        }
        button:disabled {
            background: #440000;
            color: #a44;
            border-color: #a44;
            cursor: not-allowed;
        }
        button:hover:enabled {
            background: #ff3c3c;
            color: #fff;
        }
        #preview {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            border: 2px solid #ff3c3c;
            width: 300px;
            height: 300px;
            margin: 0 auto;
            position: relative;
            background: #1a0000;
        }
        .preview-image {
            max-width: 100%;
            max-height: 100%;
            position: absolute;
            display: none;
        }
    </style>
</head>
<body>
    <h1>GIF Creator 2.0</h1>
    <input type="file" id="fileInput" accept="image/*" multiple>
    <button id="createGifButton" disabled>Create GIF</button>
    <button id="downloadGifButton" disabled>Download GIF</button>
    <div id="preview"></div>
    <div id="frameListContainer" style="margin:24px 0 12px 0;max-width:400px;width:100%;">
        <h2 style="font-size:1.1em;color:#ff3c3c;margin-bottom:8px;">Reorder Frames</h2>
        <ul id="frameList" style="list-style:none;padding:0;margin:0;display:flex;flex-wrap:wrap;gap:8px;"></ul>
        <div id="frameListHint" style="font-size:0.95em;color:#aaa;margin-top:4px;">Drag and drop to reorder frames before creating your GIF.</div>
    </div>

    <script>


        const fileInput = document.getElementById('fileInput');
        const createGifButton = document.getElementById('createGifButton');
        const downloadGifButton = document.getElementById('downloadGifButton');
        const preview = document.getElementById('preview');
        const frameList = document.getElementById('frameList');
        let images = [];
        let gifBlob = null;
        let animationInterval = null;

        // Handle file selection
        fileInput.addEventListener('change', function(event) {
            const files = event.target.files;
            images = [];
            preview.innerHTML = '';
            frameList.innerHTML = '';
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.className = 'preview-image';
                    preview.appendChild(img);
                    images.push(img);
                    if (images.length === files.length) {
                        createGifButton.disabled = false;
                        startPreviewAnimation();
                        renderFrameList();
                    }
                };
                reader.readAsDataURL(file);
            }
        });

        function startPreviewAnimation() {
            if (images.length > 1) {
                let currentIndex = 0;
                animationInterval = setInterval(() => {
                    images.forEach((img, index) => {
                        img.style.display = index === currentIndex ? 'block' : 'none';
                    });
                    currentIndex = (currentIndex + 1) % images.length;
                }, 200);
            } else if (images.length === 1) {
                images[0].style.display = 'block';
            }
        }

        // --- Frame Reordering UI ---
        function renderFrameList() {
            frameList.innerHTML = '';
            images.forEach((img, idx) => {
                const li = document.createElement('li');
                li.style.display = 'flex';
                li.style.flexDirection = 'column';
                li.style.alignItems = 'center';
                li.style.background = '#1a0000';
                li.style.border = '2px solid #ff3c3c';
                li.style.borderRadius = '8px';
                li.style.padding = '4px 6px 2px 6px';
                li.style.cursor = 'grab';
                li.style.width = '54px';
                li.style.position = 'relative';
                li.setAttribute('draggable', 'true');
                li.setAttribute('data-idx', idx);
                const thumb = document.createElement('img');
                thumb.src = img.src;
                thumb.style.width = '40px';
                thumb.style.height = '40px';
                thumb.style.objectFit = 'cover';
                thumb.style.borderRadius = '4px';
                thumb.style.marginBottom = '2px';
                const label = document.createElement('span');
                label.textContent = idx + 1;
                label.style.fontSize = '0.9em';
                label.style.color = '#ff3c3c';
                li.appendChild(thumb);
                li.appendChild(label);
                // Drag events
                li.addEventListener('dragstart', e => {
                    e.dataTransfer.effectAllowed = 'move';
                    e.dataTransfer.setData('from-idx', idx);
                    li.classList.add('dragging');
                });
                li.addEventListener('dragend', e => {
                    li.classList.remove('dragging');
                });
                li.addEventListener('dragover', e => {
                    e.preventDefault();
                    li.style.background = '#2a0000';
                });
                li.addEventListener('dragleave', e => {
                    li.style.background = '#1a0000';
                });
                li.addEventListener('drop', e => {
                    e.preventDefault();
                    li.style.background = '#1a0000';
                    const fromIdx = parseInt(e.dataTransfer.getData('from-idx'));
                    const toIdx = idx;
                    if (fromIdx !== toIdx) {
                        reorderImages(fromIdx, toIdx);
                        renderFrameList();
                        startPreviewAnimation();
                    }
                });
                frameList.appendChild(li);
            });
        }

        function reorderImages(fromIdx, toIdx) {
            if (fromIdx < 0 || toIdx < 0 || fromIdx === toIdx) return;
            const moved = images.splice(fromIdx, 1)[0];
            images.splice(toIdx, 0, moved);
        }

        // Create GIF Button using gif.js
        createGifButton.addEventListener('click', function() {
            if (images.length === 0) {
                alert('Please upload at least one image.');
                return;
            }
            clearInterval(animationInterval);
            if (!images[0]) return;
            // Use the first image's natural size for GIF output
            const firstImg = images[0];
            const gifWidth = firstImg.naturalWidth || 300;
            const gifHeight = firstImg.naturalHeight || 300;
            const gif = new GIF({
                workers: 2,
                quality: 10,
                width: gifWidth,
                height: gifHeight,
                workerScript: 'MaskingPower/gif.worker.js'
            });
            // Draw each image to a canvas of the correct size, then add to GIF
            images.forEach(img => {
                const canvas = document.createElement('canvas');
                canvas.width = gifWidth;
                canvas.height = gifHeight;
                const ctx = canvas.getContext('2d');
                ctx.clearRect(0, 0, gifWidth, gifHeight);
                ctx.drawImage(img, 0, 0, gifWidth, gifHeight);
                gif.addFrame(canvas, {delay: 200, copy: true});
            });
            gif.on('finished', function(blob) {
                gifBlob = URL.createObjectURL(blob);
                const img = document.createElement('img');
                img.src = gifBlob;
                preview.innerHTML = '';
                preview.appendChild(img);
                downloadGifButton.disabled = false;
                console.log('GIF created successfully.');
            });
            gif.render();
        });

        // Download GIF Button
        downloadGifButton.addEventListener('click', function() {
            if (gifBlob) {
                const a = document.createElement('a');
                a.href = gifBlob;
                a.download = 'animated.gif';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            } else {
                alert('Please create the GIF first.');
            }
        });
    </script>
</body>
</html>
