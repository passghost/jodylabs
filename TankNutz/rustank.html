<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Extra-Long Soviet Tank (Rotating Turret)</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  html,body{margin:0;height:100%;background:#0d0d0d;display:grid;place-items:center}
  canvas{width:256px;height:256px;image-rendering:pixelated;outline:1px solid #222;background:transparent}
</style>
</head>
<body>
<canvas id="c" width="64" height="64"></canvas>
<script>
(() => {
  const c = document.getElementById('c');
  const ctx = c.getContext('2d');

  const P = {
    red:      '#b32121',
    redDark:  '#771717',
    redLite:  '#d74d4d',
    rim:      '#ffd39b',
    tread:    '#2b2b2b',
    treadHi:  '#4a4a4a',
    metal:    '#3a3a3a',
    outline:  '#0e0e0e',
    decal:    '#f4d553'
  };

  const px = (x,y,w=1,h=1,c='#fff') => { ctx.fillStyle=c; ctx.fillRect(x,y,w,h); };
  const rectOutline = (x,y,w,h,c) => {
    px(x, y, w, 1, c); px(x, y+h-1, w, 1, c);
    px(x, y, 1, h, c); px(x+w-1, y, 1, h, c);
  };

  function drawTrack(x, y, w, h, off) {
    px(x, y, w, h, P.tread);
    for (let i = (4 - (off % 4)) % 4; i < w; i += 4) {
      px(x + i, y, 2, h, P.treadHi);
    }
    px(x, y, w, 1, P.rim);
    px(x, y+h-1, w, 1, P.outline);
    px(x, y, 1, h, P.outline);
    px(x+w-1, y, 1, h, P.outline);
  }

  function drawHull(cx, cy) {
    const hullW = 44, hullH = 18;
    const hx = cx - hullW/2;
    const hy = cy - hullH/2;
    px(hx, hy, hullW, hullH, P.red);
    px(hx+1, hy+1, hullW-6, 1, P.rim);
    px(hx+2, hy+2, hullW-10, 1, P.redLite);
    px(hx+1, hy+hullH-3, hullW-2, 2, P.redDark);
    for (let i = 6; i < hullW-10; i += 5) {
      px(hx+i, hy+Math.floor(hullH/2)+3, 3, 1, P.metal);
    }
    px(hx+6, hy+6, 3, 1, P.decal);
    px(hx+7, hy+5, 1, 3, P.decal);
    rectOutline(hx, hy, hullW, hullH, P.outline);
  }

  function drawTurret(cx, cy, angle) {
    ctx.save();
    ctx.translate(cx, cy);
    ctx.rotate(angle);

    // Wider turret
    const tw = 22, th = 14;
    const tx = -tw/2;
    const ty = -th/2;

    px(tx, ty, tw, th, P.red);
    px(tx+1, ty+1, tw-2, 1, P.rim);
    px(tx+2, ty+2, tw-4, 1, P.redLite);
    rectOutline(tx, ty, tw, th, P.outline);

    // Barrel (facing right relative to rotation)
    const by = ty + th/2 - 1;
    const bx = tx + tw - 1;
    const barrelLen = 20;
    px(bx, by, barrelLen, 2, P.redDark);
    px(bx, by, barrelLen, 1, P.redLite);
    px(bx + barrelLen - 2, by, 2, 2, P.metal);
    px(bx + barrelLen - 2, by, 2, 1, P.rim);
    px(bx-2, by-1, 3, 4, P.metal);
    rectOutline(bx-2, by-1, 3, 4, P.outline);

    ctx.restore();
  }

  function draw(frame, angle) {
    ctx.clearRect(0,0,64,64);
    const cx = 32, cy = 32;
    const trackW = 48, trackH = 6;
    const tx = cx - trackW/2;
    const off = frame % 4;
    drawTrack(tx, cy-12, trackW, trackH,  off);
    drawTrack(tx, cy+6,  trackW, trackH, (4-off)%4);
    drawHull(cx, cy);
    drawTurret(cx, cy, angle);
  }

  let frame = 0, acc = 0, last = performance.now();
  const step = 120;
  let turretAngle = 0;

  function loop(now){
    acc += now - last; last = now;
    while (acc >= step){ frame = (frame + 1) % 6; acc -= step; }
    turretAngle += 0.05; // continuous circle rotation
    draw(frame, turretAngle);
    requestAnimationFrame(loop);
  }
  loop(last);
})();
</script>
</body>
</html>
